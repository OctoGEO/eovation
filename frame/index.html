<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title>OpenMapTiles OSM Bright style</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.44.1/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.44.1/mapbox-gl.css' rel='stylesheet' />
    <link rel="icon" type="image/png" href="/eovation/frame/favicon.png" />
    <link rel="shortcut icon" href="/eovation/frame/favicon.ico" type="image/x-icon">
    <style>
        body { margin:0; padding:0; font-family: sans-serif; }
        * { box-sizing: border-box; }
        #header { position:absolute; top:0; bottom:0; height: 10vh; width:100%; padding: 1vh;
            font-size: 4vh;
            display:flex;
            align-items:center;
        }
        #header img { height: 8vh; width:auto;}
        #header span { margin-left: 4vh; }
        #map { position:absolute; top:10vh; bottom:0; width:100%; }
        #buttons { position:absolute; top:11vh; right:0; height: 10vh; }
        #buttons button {
            background-color: #4CAF50;
            border: none;
            color: white;
            padding: 2vh;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 3vh;
            margin: 1vh;
            cursor: pointer;
        }
        #links { position:absolute; bottom:5vh; right:0; background-color: rgba(255,255,255,0.7); }
        #links > div { display: none; }
        #links > div.active { display: block; }
    </style>
</head>
<body>
    <div id='header'>
        <img src="octogeo.png" />
        <span>OctoGEO.com</span>
    </div>
    <div id='map'></div>
    <div id='buttons'>
        <button type="button" id="noise">Noise</button>
        <button type="button" id="light">Light</button>
        <button type="button" id="green">Green</button>
    </div>
    <div id='links'>
        <div class="noise active">
            <a target="_blank" href="https://octogeo.com/eovation/noise/index.html#ll=49.17711,16.60458;alt=11569;h=0.005;t=3.451">3D</a>
        </div>
    </div>
    <script>
        var map = new mapboxgl.Map({
            container: 'map',
            style: '/eovation/noise/style.satellite.json',
            center: [8.5456, 47.3739],
            zoom: 11,
            hash: true
        });

        var onButtonClick = function(evt) {
            var id = evt.target.id;
            var styles = {
                noise: '/eovation/noise/style.satellite.json',
                green: '/eovation/landcover/style.satellite.json',
                light: '/eovation/light/style.satellite.json'
            }
            var style = styles[id];
            map.setStyle(style, {diff: false});

            var links = document.getElementById('links');
            [].forEach.call(links.children, function(div) {
                console.log(div);
                console.log(div, div.classList.contains(id));
               if(div.classList.contains(id)) {
                   div.classList.add('active')
               } else {
                   div.classList.remove('active')
               }
            });


        }

        document.getElementById('noise').addEventListener('click', onButtonClick);
        document.getElementById('light').addEventListener('click', onButtonClick);
        document.getElementById('green').addEventListener('click', onButtonClick);

    </script>
</body>
</html>